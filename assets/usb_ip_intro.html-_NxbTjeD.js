import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as c,c as u,a as e,f as n,d as s,b,w as a,e as r}from"./app-C_LzcjlM.js";const v={},h=e("h1",{id:"usb-ip的安装和使用",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#usb-ip的安装和使用"},[e("span",null,"USB/IP的安装和使用")])],-1),m={href:"https://usbip.sourceforge.net/",target:"_blank",rel:"noopener noreferrer"},g=e("h2",{id:"安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#安装"},[e("span",null,"安装")])],-1),k=e("blockquote",null,[e("p",null,"Linux")],-1),_=e("p",null,"USB/IP在Linux中默认集成到 Linux-3.17 主线上。其他版本的Linux可以通过官方的包管理安装usbip，一般都可以完成安装。",-1),S=e("p",null,"下面以Ubuntu为例。",-1),U=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"sudo"),n(),e("span",{class:"token function"},"apt"),n(),e("span",{class:"token function"},"install"),n(` linux-tools-generic
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),B=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"sudo"),n(),e("span",{class:"token function"},"apt"),n(),e("span",{class:"token function"},"install"),n(` linux-tools-common
`),e("span",{class:"token function"},"sudo"),n(),e("span",{class:"token function"},"apt"),n(),e("span",{class:"token function"},"install"),n(` linux-tools-5.15.0-100-generic

`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),f=r(`<p>然后加载对应的内核模块</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> modprobe usbip-core
<span class="token function">sudo</span> modprobe usbip-host
<span class="token function">sudo</span> modprobe vhci-hcd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装完成后最好重启一次</p><blockquote><p>Win</p></blockquote>`,4),x={href:"https://github.com/dorssel/usbipd-win",title:"项目主页",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/dorssel/usbipd-win/releases",title:"点击下载",target:"_blank",rel:"noopener noreferrer"},P=r(`<h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><p>安装usbip以后，就能在命令行工具中使用usbip命令进行USB设备的共享和连接了。</p><p>使用usbip要注意几个要点。</p><ul><li>USB/IP是服务端客户端CS模型的工具软件，在共享和连接USB设备过程中是区分服务端和客户端的。</li><li>连接USB物理设备的要作为服务端启动，需要远程连接到这个USB设备的主机要作为客户端启动。</li><li>简单得说就是服务端bind绑定具体的设备号&lt;busid&gt;，客户端attach到对应的ip和设备号&lt;busid&gt;</li></ul><div class="hint-container info"><p class="hint-container-title">Windows 作为服务端</p><p>usbipd-win 的help信息</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>usbipd <span class="token operator">--</span>help

usbipd-win 4<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0

Description:
  Shares locally connected USB devices to other machines<span class="token punctuation">,</span> including Hyper-V guests and WSL 2<span class="token punctuation">.</span>

Usage:
  usbipd <span class="token namespace">[command]</span> <span class="token namespace">[options]</span>

Options:
  <span class="token operator">--</span>version       Show version information
  <span class="token operator">-</span>?<span class="token punctuation">,</span> <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">--</span>help  Show help and usage information

Commands:
  attach   Attach a USB device to a client
  bind     Bind device
  detach   Detach a USB device <span class="token keyword">from</span> a client
  license  Display license information
  list     List USB devices
  server   Run the server on the console
  state    Output state in JSON
  unbind   Unbind device
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看所有USB设备</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>usbipd list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>绑定需要分享的设备ID，bind还能使用其他参数，自行help查看</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>usbipd bind <span class="token operator">--</span>busid=&lt;BUSID&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解除绑定已分享的设备ID，unbind还能使用其他参数，自行help查看</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>usbipd unbind <span class="token operator">--</span>busid=&lt;BUSID&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="hint-container info"><p class="hint-container-title">WSL 2 作为客户端</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>usbipd attach <span class="token parameter variable">--wsl</span> <span class="token parameter variable">--busid</span><span class="token operator">=</span><span class="token operator">&lt;</span>BUSID<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="hint-container info"><p class="hint-container-title">Ubuntu 作为客户端</p><p>查看目标服务端上开启共享的USB设备</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>usbip list <span class="token parameter variable">--remote</span><span class="token operator">=</span><span class="token operator">&lt;</span>HOST<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>选择attach到特定的USB设备</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> usbip attach <span class="token parameter variable">--remote</span><span class="token operator">=</span><span class="token operator">&lt;</span>HOST<span class="token operator">&gt;</span> <span class="token parameter variable">--busid</span><span class="token operator">=</span><span class="token operator">&lt;</span>BUSID<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看当前attch的设备</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> usbip port
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>detach特定设备</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>sudp usbip detach <span class="token parameter variable">-p</span> <span class="token operator">&lt;</span>PORT_ID<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div>`,7);function w(y,L){const t=o("ExternalLinkIcon"),d=o("CodeTabs");return c(),u("div",null,[h,e("p",null,[e("a",m,[n("USB/IP"),s(t)]),n("项目旨在开发一个通过IP网络实现通用USB设备共享的系统。为了实现USB设备在计算机之间的完全功能共享，USB/IP将“USB I/O消息”封装到TCP/IP的有效载荷中，并在计算机之间传输这些消息。")]),b(" more "),g,k,_,S,s(d,{id:"21",data:[{id:"常用"},{id:"另一种"}],active:0,"tab-id":"shell"},{title0:a(({value:i,isActive:l})=>[n("常用")]),title1:a(({value:i,isActive:l})=>[n("另一种")]),tab0:a(({value:i,isActive:l})=>[U]),tab1:a(({value:i,isActive:l})=>[B]),_:1}),f,e("p",null,[n("Windows系统需要安装"),e("a",x,[n("usbipd-win"),s(t)]),n("以启用usbip功能。进入"),e("a",I,[n("下载页面"),s(t)]),n("，选择对应版本usbipd-win.msi下载并完成安装。")]),P])}const D=p(v,[["render",w],["__file","usb_ip_intro.html.vue"]]),N=JSON.parse(`{"path":"/posts/backend/usb_ip_intro.html","title":"USB/IP的安装和使用","lang":"zh-CN","frontmatter":{"title":"USB/IP的安装和使用","icon":"fas fa-laptop-code","date":"2024-03-17T00:00:00.000Z","category":["后端"],"tag":["Linux","Ubuntu","工具软件"],"description":"USB/IP的安装和使用 USB/IP项目旨在开发一个通过IP网络实现通用USB设备共享的系统。为了实现USB设备在计算机之间的完全功能共享，USB/IP将“USB I/O消息”封装到TCP/IP的有效载荷中，并在计算机之间传输这些消息。 安装 Linux USB/IP在Linux中默认集成到 Linux-3.17 主线上。其他版本的Linux可以通过...","head":[["meta",{"property":"og:url","content":"https://noly1990.github.io/noly_station/noly_station/posts/backend/usb_ip_intro.html"}],["meta",{"property":"og:site_name","content":"Noly's Station"}],["meta",{"property":"og:title","content":"USB/IP的安装和使用"}],["meta",{"property":"og:description","content":"USB/IP的安装和使用 USB/IP项目旨在开发一个通过IP网络实现通用USB设备共享的系统。为了实现USB设备在计算机之间的完全功能共享，USB/IP将“USB I/O消息”封装到TCP/IP的有效载荷中，并在计算机之间传输这些消息。 安装 Linux USB/IP在Linux中默认集成到 Linux-3.17 主线上。其他版本的Linux可以通过..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-18T07:06:38.000Z"}],["meta",{"property":"article:author","content":"Noly"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"工具软件"}],["meta",{"property":"article:published_time","content":"2024-03-17T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-18T07:06:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"USB/IP的安装和使用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-03-17T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-18T07:06:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Noly\\",\\"url\\":\\"/intro\\"}]}"]]},"headers":[{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[]}],"git":{"createdTime":1711095416000,"updatedTime":1721286398000,"contributors":[{"name":"n100","email":"n100@example.com","commits":2}]},"readingTime":{"minutes":2.29,"words":686},"filePathRelative":"posts/backend/usb_ip_intro.md","localizedDate":"2024年3月17日","excerpt":"\\n<p><a href=\\"https://usbip.sourceforge.net/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">USB/IP</a>项目旨在开发一个通过IP网络实现通用USB设备共享的系统。为了实现USB设备在计算机之间的完全功能共享，USB/IP将“USB I/O消息”封装到TCP/IP的有效载荷中，并在计算机之间传输这些消息。</p>\\n","autoDesc":true}`);export{D as comp,N as data};
